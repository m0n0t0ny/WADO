<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#25D366">
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="description" content="Apri conversazioni WhatsApp senza salvare contatti">
    <meta name="application-name" content="WA Direct">
    <meta name="apple-mobile-web-app-title" content="WA Direct">
    <title>WhatsApp Direct Opener</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" sizes="72x72" href="icon-72x72.png">
    <link rel="icon" sizes="96x96" href="icon-96x96.png">
    <link rel="icon" sizes="128x128" href="icon-128x128.png">
    <link rel="icon" sizes="144x144" href="icon-144x144.png">
    <link rel="icon" sizes="152x152" href="icon-152x152.png">
    <link rel="icon" sizes="192x192" href="icon-192x192.png">
    <link rel="icon" sizes="384x384" href="icon-384x384.png">
    <link rel="icon" sizes="512x512" href="icon-512x512.png">
    <link rel="apple-touch-icon" sizes="72x72" href="icon-72x72.png">
    <link rel="apple-touch-icon" sizes="96x96" href="icon-96x96.png">
    <link rel="apple-touch-icon" sizes="128x128" href="icon-128x128.png">
    <link rel="apple-touch-icon" sizes="144x144" href="icon-144x144.png">
    <link rel="apple-touch-icon" sizes="152x152" href="icon-152x152.png">
    <link rel="apple-touch-icon" sizes="192x192" href="icon-192x192.png">
    <link rel="apple-touch-icon" sizes="384x384" href="icon-384x384.png">
    <link rel="apple-touch-icon" sizes="512x512" href="icon-512x512.png">
    <script src="splashscreen.js"></script>
    <script src="network-status.js"></script>
</head>

<body>
    <div class="app-container">
        <div class="app-header">
            <img src="./img/icon/icon-72x72.png" alt="">
            <div>
                <h1>WADO</h1>
                <p>WhatsApp Direct Opener</p>
            </div>
        </div>
        <div class="app-content">
            <div class="input-group">
                <label for="phone">Numero di telefono</label>
                <div class="phone-input">
                    <input type="text" id="countryCode" class="country-code-input" value="+39" maxlength="5">
                    <input type="tel" id="phone" placeholder="Inserisci il numero" pattern="[0-9]*">
                </div>
                <p class="helper-text">Inserisci il numero senza spazi o trattini</p>
                <p class="error-message" id="errorMessage">Inserisci un numero valido</p>
            </div>
            <button class="button" id="openWhatsApp">Apri WhatsApp</button>

            <div class="recent-numbers" id="recentNumbersContainer">
                <div class="recent-header">
                    <h3>Contatti recenti</h3>
                    <button class="add-contact-button" id="addContactButton" aria-label="Aggiungi contatto">
                        <svg xmlns="http://www.w3.org/2000/svg" height="24px" viewBox="0 0 24 24" width="24px"
                            fill="currentColor">
                            <path d="M0 0h24v24H0V0z" fill="none" />
                            <path
                                d="M15 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm-9-2V7H4v3H1v2h3v3h2v-3h3v-2H6zm9 4c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
                        </svg>
                    </button>
                </div>
                <div class="search-container" id="searchContainer">
                    <svg class="search-icon" xmlns="http://www.w3.org/2000/svg" height="16px" viewBox="0 0 24 24"
                        width="16px" fill="currentColor">
                        <path d="M0 0h24v24H0V0z" fill="none" />
                        <path
                            d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z" />
                    </svg>
                    <input type="search" id="searchInput" class="search-input" placeholder="Cerca contatti..."
                        autocomplete="off">
                </div>
                <ul class="recent-list" id="recentNumbers">
                    <!-- I numeri recenti verranno inseriti qui via JavaScript -->
                </ul>
                <div class="empty-state" id="emptyState" style="display: none;">
                    <div class="empty-state-icon">ðŸ“ž</div>
                    <div class="empty-state-text">Nessun contatto trovato</div>
                </div>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
    <script>
        // Registra il Service Worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function () {
                navigator.serviceWorker.register('service-worker.js')
                    .then(function (registration) {
                        console.log('Service Worker registrato con successo:', registration.scope);
                    })
                    .catch(function (error) {
                        console.log('Registrazione Service Worker fallita:', error);
                    });
            });
        }
    </script>
</body>

</html>